<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CASE Physics 2025-26 Ultimate Prep</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- MATHJAX CONFIGURATION (Fixes the issue) -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <!-- MathJax Library -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <style>
        :root {
            --bg-primary: #0B0E14;
            --bg-secondary: #151921;
            --accent-blue: #3B82F6;
            --accent-indigo: #6366F1;
            --text-primary: #E2E8F0;
            --text-secondary: #94A3B8;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-secondary); }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        
        .glass-panel {
            background: rgba(21, 25, 33, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .card-hover { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .card-hover:hover {
            transform: translateY(-4px);
            border-color: rgba(59, 130, 246, 0.5);
            box-shadow: 0 10px 30px -10px rgba(59, 130, 246, 0.2);
        }

        .gradient-text {
            background: linear-gradient(135deg, #60A5FA 0%, #A78BFA 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* MathJax adjustments */
        mjx-container {
            font-size: 110% !important;
            color: #E2E8F0 !important;
        }
        
        /* Note Content Styling */
        .note-content h3 { font-size: 1.5rem; font-weight: 700; color: white; margin-bottom: 1rem; margin-top: 2rem; }
        .note-content h4 { font-size: 1.25rem; font-weight: 600; color: #60A5FA; margin-bottom: 0.5rem; margin-top: 1.5rem; }
        .note-content p { margin-bottom: 0.75rem; line-height: 1.6; color: #CBD5E1; }
        .note-content ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1rem; color: #CBD5E1; }
        .note-content li { margin-bottom: 0.5rem; }
        .note-content strong { color: white; }
        .formula-box { background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(148, 163, 184, 0.1); padding: 1rem; border-radius: 0.5rem; margin: 1rem 0; }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="border-b border-gray-800 bg-[#0B0E14]/90 sticky top-0 z-50 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="h-10 w-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/20">
                    <i class="fas fa-atom text-white text-lg"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-white tracking-tight">CASE Physics <span class="gradient-text">2025-26</span></h1>
                    <p class="text-xs text-slate-400 font-mono tracking-wider">ULTIMATE PREP SUITE</p>
                </div>
            </div>
            
            <div class="hidden md:flex items-center gap-6">
                <nav class="flex gap-1 bg-gray-900 p-1 rounded-lg">
                    <button onclick="switchView('dashboard')" id="nav-dashboard" class="px-4 py-1.5 text-sm font-medium rounded-md text-white bg-gray-800 shadow-sm transition-all">Dashboard</button>
                    <button onclick="switchView('study-zone')" id="nav-study-zone" class="px-4 py-1.5 text-sm font-medium rounded-md text-slate-400 hover:text-white transition-all">Study Zone ðŸ“š</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content Container -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full relative">

        <!-- VIEW: DASHBOARD -->
        <div id="view-dashboard" class="space-y-12 animate-fade-in">
            <!-- Hero -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 relative overflow-hidden rounded-2xl border border-gray-800 bg-gradient-to-br from-gray-900 to-[#0F1218] p-8 shadow-2xl">
                    <div class="relative z-10">
                        <h2 class="text-3xl font-bold text-white mb-2">Exam Strategy Center</h2>
                        <p class="text-slate-400 text-lg leading-relaxed">
                            Targeting <strong>70/70</strong>. Based on the strict 2025-26 Blueprint. 
                            <br><span class="text-blue-400 font-semibold">Focus:</span> Optics (18M) & Magnetism (17M) are your winning zones.
                        </p>
                    </div>
                </div>

                <div class="glass-panel p-6 rounded-2xl flex flex-col justify-center gap-4">
                    <button onclick="openModal('hot-list')" class="group w-full py-4 px-6 rounded-xl bg-gradient-to-r from-blue-600/20 to-indigo-600/20 border border-blue-500/30 hover:border-blue-400 transition-all flex items-center justify-between">
                        <div class="text-left"><div class="text-sm font-bold text-white">ðŸ”¥ Most Probable Qs</div><div class="text-xs text-blue-300">With Detailed Answers</div></div>
                        <i class="fas fa-chevron-right text-blue-500/50 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                    <button onclick="openModal('repeated-list')" class="group w-full py-4 px-6 rounded-xl bg-gradient-to-r from-amber-600/20 to-orange-600/20 border border-amber-500/30 hover:border-amber-400 transition-all flex items-center justify-between">
                        <div class="text-left"><div class="text-sm font-bold text-white">âš¡ High Frequency</div><div class="text-xs text-amber-300">Repeated Concepts</div></div>
                        <i class="fas fa-chevron-right text-amber-500/50 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </div>
            </div>

            <!-- Blueprint Explorer -->
            <div>
                <div class="flex overflow-x-auto gap-2 pb-4 border-b border-gray-800 mb-6" id="section-tabs"></div>
                <div id="content-area" class="min-h-[300px]"></div>
            </div>

            <!-- Analytics -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="glass-panel p-6 rounded-2xl">
                    <h3 class="text-lg font-bold text-white mb-4">Unit Weightage</h3>
                    <div class="chart-container"><canvas id="weightageChart"></canvas></div>
                </div>
                <div class="glass-panel p-6 rounded-2xl">
                    <h3 class="text-lg font-bold text-white mb-4">Cognitive Breakdown</h3>
                    <div class="chart-container"><canvas id="typologyChart"></canvas></div>
                </div>
            </div>

            <!-- Resources -->
            <div class="mt-16 mb-12">
                <h2 class="text-2xl font-bold text-white mb-6">Resource Archive</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <a href="Physics-SQP 2025.pdf" target="_blank" class="glass-panel p-6 rounded-2xl border border-gray-800 hover:border-purple-500/50 transition-all text-center">
                        <i class="fas fa-file-pdf text-purple-400 text-3xl mb-4"></i>
                        <h3 class="text-white font-bold text-sm">CBSE SQP 2025-26</h3>
                        <span class="text-xs text-purple-400 mt-2 block">DOWNLOAD</span>
                    </a>
                    <a href="PHYSICS CASE QP 2024-SET A.pdf" target="_blank" class="glass-panel p-6 rounded-2xl border border-gray-800 hover:border-indigo-500/50 transition-all text-center">
                        <i class="fas fa-file-alt text-indigo-400 text-3xl mb-4"></i>
                        <h3 class="text-white font-bold text-sm">CASE 2024 Set A</h3>
                        <span class="text-xs text-indigo-400 mt-2 block">DOWNLOAD</span>
                    </a>
                    <a href="PHYSICS CASE QP- 2024-SET B.pdf" target="_blank" class="glass-panel p-6 rounded-2xl border border-gray-800 hover:border-blue-500/50 transition-all text-center">
                        <i class="fas fa-file-alt text-blue-400 text-3xl mb-4"></i>
                        <h3 class="text-white font-bold text-sm">CASE 2024 Set B</h3>
                        <span class="text-xs text-blue-400 mt-2 block">DOWNLOAD</span>
                    </a>
                    <a href="Physics-SQP.pdf" target="_blank" class="glass-panel p-6 rounded-2xl border border-gray-800 hover:border-emerald-500/50 transition-all text-center">
                        <i class="fas fa-history text-emerald-400 text-3xl mb-4"></i>
                        <h3 class="text-white font-bold text-sm">CBSE SQP 2023</h3>
                        <span class="text-xs text-emerald-400 mt-2 block">DOWNLOAD</span>
                    </a>
                    <a href="Physics_G12_Vol1_2023.pdf" target="_blank" class="glass-panel p-6 rounded-2xl border border-gray-800 hover:border-orange-500/50 transition-all text-center">
                        <i class="fas fa-brain text-orange-400 text-3xl mb-4"></i>
                        <h3 class="text-white font-bold text-sm">Competency Guide Vol 1</h3>
                        <span class="text-xs text-orange-400 mt-2 block">DOWNLOAD</span>
                    </a>
                    <a href="Physics_12Vol2.pdf" target="_blank" class="glass-panel p-6 rounded-2xl border border-gray-800 hover:border-pink-500/50 transition-all text-center">
                        <i class="fas fa-brain text-pink-400 text-3xl mb-4"></i>
                        <h3 class="text-white font-bold text-sm">Competency Guide Vol 2</h3>
                        <span class="text-xs text-pink-400 mt-2 block">DOWNLOAD</span>
                    </a>
                </div>
                <div class="mt-8 pt-6 border-t border-gray-800 text-center text-xs text-slate-500">
                    <p><strong>Sources Verified:</strong> CBSE Curriculum 2025-26 â€¢ CBSE Sample Question Paper 2025-26 â€¢ CASE Past Year Papers</p>
                </div>
            </div>
        </div>

        <!-- VIEW: STUDY ZONE -->
        <div id="view-study-zone" class="hidden space-y-8 animate-fade-in">
            <div class="text-center py-8">
                <h2 class="text-4xl font-bold text-white mb-2">Deep Dive Study Zone</h2>
                <p class="text-slate-400">Complete Syllabus Notes, Derivations, and Exam-Ready Answers.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-8 h-full">
                <div class="lg:col-span-1 space-y-2 h-fit sticky top-24 overflow-y-auto max-h-[80vh] custom-scrollbar" id="study-nav"></div>
                <div class="lg:col-span-3">
                    <div id="study-content" class="glass-panel p-8 rounded-2xl border border-gray-800 min-h-[600px] note-content"></div>
                </div>
            </div>
        </div>

    </main>

    <!-- Modal -->
    <div id="modal-backdrop" class="fixed inset-0 bg-black/90 backdrop-blur-sm z-[100] hidden" onclick="closeModal()"></div>
    <div id="modal-panel" class="fixed inset-x-4 top-10 bottom-10 md:w-3/4 md:left-1/2 md:-translate-x-1/2 bg-[#151921] border border-gray-700 rounded-2xl z-[101] hidden flex flex-col">
        <div class="px-6 py-4 border-b border-gray-700 flex justify-between items-center bg-[#0B0E14] rounded-t-2xl">
            <h3 id="modal-title" class="text-xl font-bold text-white"></h3>
            <button onclick="closeModal()" class="text-slate-400 hover:text-white"><i class="fas fa-times"></i></button>
        </div>
        <div id="modal-body" class="flex-1 overflow-y-auto p-6 space-y-6 note-content"></div>
    </div>

    <!-- JS Logic -->
    <script>
        // --- DATA: Q&A ---
        const qaDatabase = {
            'hot-list': [
                {
                    q: "Q31: Derive the expression for Capacitance of a parallel plate capacitor with a dielectric slab of thickness t < d.",
                    a: "<strong>Step 1: Setup</strong><br>Consider a parallel plate capacitor with area $A$, separation $d$. Vacuum field is $E_0 = \\sigma/\\epsilon_0$. A dielectric slab of thickness $t$ and constant $K$ is inserted.<br><br><strong>Step 2: Field Distribution</strong><br>Inside air (thickness $d-t$): Field is $E_0$.<br>Inside dielectric (thickness $t$): Field is $E = E_0/K$.<br><br><strong>Step 3: Potential Difference (V)</strong><br>$$ V = E_0(d-t) + E(t) $$<br>$$ V = E_0(d-t) + \\frac{E_0}{K}(t) $$<br>$$ V = E_0 [d - t + \\frac{t}{K}] = E_0 [d - t(1 - \\frac{1}{K})] $$<br><br><strong>Step 4: Capacitance</strong><br>Since $E_0 = \\frac{Q}{A\\epsilon_0}$, substitute $E_0$:<br>$$ V = \\frac{Q}{A\\epsilon_0} [d - t(1 - \\frac{1}{K})] $$<br>$$ C = \\frac{Q}{V} = \\frac{\\epsilon_0 A}{d - t(1 - \\frac{1}{K})} $$",
                    twist: "<strong>Twist:</strong> If a metal slab is used ($K=\\infty$), the term $1/K \\to 0$. Formula becomes $C = \\epsilon_0 A / (d-t)$."
                },
                {
                    q: "Q32: Lens Maker's Formula (Convex Lens)",
                    a: "<strong>Assumptions:</strong> Thin lens, paraxial rays, point object.<br><br><strong>Surface 1 (Air $n_1$ to Glass $n_2$):</strong> Image $I_1$ forms at $v'$.<br>$$ \\frac{n_2}{v'} - \\frac{n_1}{u} = \\frac{n_2-n_1}{R_1} \\quad ...(1) $$<br><br><strong>Surface 2 (Glass $n_2$ to Air $n_1$):</strong> $I_1$ acts as virtual object. Final image $I$ at $v$.<br>$$ \\frac{n_1}{v} - \\frac{n_2}{v'} = \\frac{n_1-n_2}{R_2} \\quad ...(2) $$<br><br><strong>Combine:</strong> Add (1) and (2):<br>$$ \\frac{n_1}{v} - \\frac{n_1}{u} = (n_2-n_1)(\\frac{1}{R_1} - \\frac{1}{R_2}) $$<br>Divide by $n_1$: $$ \\frac{1}{v} - \\frac{1}{u} = (\\frac{n_2}{n_1} - 1)(\\frac{1}{R_1} - \\frac{1}{R_2}) $$<br><br><strong>Result:</strong> When $u=\\infty, v=f$. So, $1/f = (\\mu - 1)(1/R_1 - 1/R_2)$.",
                    twist: "<strong>Twist:</strong> For Equi-convex lens, $R_1 = +R, R_2 = -R$. Formula: $1/f = (\\mu-1)(2/R)$."
                },
                {
                    q: "Q33: Transformer Principle & Losses",
                    a: "<strong>Principle:</strong> Mutual Induction. An alternating current in primary coil produces changing magnetic flux, which induces EMF in secondary coil.<br><br><strong>Formula:</strong> $V_s/V_p = N_s/N_p = I_p/I_s = k$ (Transformation Ratio).<br><br><strong>Energy Losses (4 Marks part):</strong><br>1. <strong>Flux Leakage:</strong> Not all primary flux links secondary. (Fix: Soft iron core).<br>2. <strong>Resistance (Copper Loss):</strong> Heat $I^2R$ in windings. (Fix: Thick copper wires).<br>3. <strong>Eddy Currents:</strong> Induced currents in core cause heat. (Fix: Laminated core).<br>4. <strong>Hysteresis:</strong> Magnetization/Demagnetization heat. (Fix: Soft iron material).",
                    twist: "<strong>Twist:</strong> For long distance transmission, Step-Up transformer is used at power station to reduce current ($I$) and thus reduce $I^2R$ line losses."
                }
            ],
            'repeated-list': [
                {
                    q: "Gauss Law Application: Infinite Line Charge",
                    a: "<strong>Goal:</strong> Field $E$ at distance $r$ from wire with density $\\lambda$.<br><br><strong>Gaussian Surface:</strong> Cylinder of radius $r$, length $l$.<br><br><strong>Flux Calc:</strong> Field is radial. Flux through flat caps = 0 ($E \\perp dA$).<br>Flux through curved surface = $E \\times (2\\pi r l)$.<br><br><strong>Charge Enclosed:</strong> $q = \\lambda l$.<br><br><strong>Apply Law:</strong> $\\phi = q/\\epsilon_0 \\implies E(2\\pi r l) = \\lambda l / \\epsilon_0$.<br><br><strong>Result:</strong> $E = \\frac{\\lambda}{2\\pi\\epsilon_0 r}$.",
                    twist: "<strong>Graph:</strong> $E \\propto 1/r$. The graph is a rectangular hyperbola."
                },
                {
                    q: "Moving Coil Galvanometer",
                    a: "<strong>Principle:</strong> Current carrying coil in magnetic field experiences torque $\\tau = NIAB\\sin\\theta$.<br><br><strong>Radial Field:</strong> Using concave poles and soft iron core makes field radial ($\theta=90^{\\circ}$ always).<br>So, Deflecting Torque $\\tau_d = NIAB$.<br><br><strong>Equilibrium:</strong> $\\tau_d = \\tau_r$ (Restoring torque $k\\alpha$).<br>$NIAB = k\\alpha \\implies \\alpha = (NAB/k)I$.<br><br><strong>Result:</strong> Deflection $\\alpha \\propto I$ (Linear Scale).",
                    twist: "<strong>Current Sensitivity:</strong> $S_i = \\alpha/I = NAB/k$. To increase sensitivity, increase $N, A, B$ or decrease $k$ (use Phosphor Bronze)."
                }
            ]
        };

        // --- DATA: STUDY NOTES (ALL CHAPTERS) ---
        const studyData = [
            {
                id: 'ch1', title: '1. Electric Charges & Fields', 
                content: `
                    <h3>Electric Charges & Fields</h3>
                    <div class="formula-box">
                        <strong>Coulomb's Law:</strong> $$ F = k \\frac{q_1 q_2}{r^2} $$ <br>
                        <strong>Electric Field (Point Charge):</strong> $$ E = k \\frac{q}{r^2} $$ <br>
                        <strong>Dipole Axis:</strong> $$ E_{axial} = \\frac{2kp}{r^3} $$ <br>
                        <strong>Dipole Equator:</strong> $$ E_{eq} = \\frac{kp}{r^3} $$
                    </div>
                    <h4>Key Derivations</h4>
                    <p><strong>1. Torque on Dipole:</strong> Force $qE$ and $-qE$ form a couple. Torque $\\tau = \\text{Force} \\times \\text{Perpendicular dist} = qE \\times 2a\\sin\\theta = pE\\sin\\theta$. Vector form: $\\vec{\\tau} = \\vec{p} \\times \\vec{E}$.</p>
                    <p><strong>2. Gauss Law Applications:</strong></p>
                    <ul>
                        <li><strong>Infinite Wire:</strong> Gaussian surface is Cylinder. $$ E = \\frac{\\lambda}{2\\pi\\epsilon_0 r} $$</li>
                        <li><strong>Infinite Sheet:</strong> Gaussian surface is Pillbox. $$ E = \\frac{\\sigma}{2\\epsilon_0} $$ (Independent of distance).</li>
                        <li><strong>Spherical Shell:</strong> Inside $E=0$. Outside $E = kQ/r^2$.</li>
                    </ul>
                `
            },
            {
                id: 'ch2', title: '2. Potential & Capacitance', 
                content: `
                    <h3>Potential & Capacitance</h3>
                    <div class="formula-box">
                        <strong>Potential (Point Charge):</strong> $$ V = k \\frac{q}{r} $$ <br>
                        <strong>Relation E-V:</strong> $$ E = -\\frac{dV}{dr} $$ <br>
                        <strong>Capacitance:</strong> $$ C = \\frac{\\epsilon_0 A}{d} $$ <br>
                        <strong>Energy:</strong> $$ U = \\frac{1}{2} CV^2 $$
                    </div>
                    <h4>Key Concepts</h4>
                    <p><strong>Equipotential Surfaces:</strong> Surfaces where potential is constant. Electric field is always perpendicular to them. For point charge, they are concentric spheres.</p>
                    <p><strong>Effect of Dielectric (K):</strong></p>
                    <ul>
                        <li><strong>C:</strong> Increases by K times ($KC_0$).</li>
                        <li><strong>If Battery Disconnected:</strong> Q constant, V decreases ($V/K$), U decreases ($U/K$).</li>
                        <li><strong>If Battery Connected:</strong> V constant, Q increases ($KQ$), U increases ($KU$).</li>
                    </ul>
                `
            },
            {
                id: 'ch3', title: '3. Current Electricity', 
                content: `
                    <h3>Current Electricity</h3>
                    <div class="formula-box">
                        <strong>Drift Velocity:</strong> $$ v_d = \\frac{eE\\tau}{m} $$ <br>
                        <strong>Current:</strong> $$ I = n e A v_d $$ <br>
                        <strong>Resistivity:</strong> $$ \\rho = \\frac{m}{n e^2 \\tau} $$ (Depends on Temp, Material)
                    </div>
                    <h4>Kirchhoff's Laws</h4>
                    <p><strong>Junction Rule:</strong> $\\sum I = 0$ (Conservation of Charge).</p>
                    <p><strong>Loop Rule:</strong> $\\sum \\Delta V = 0$ (Conservation of Energy). Go with current = $-IR$, against current = $+IR$.</p>
                    <h4>Wheatstone Bridge</h4>
                    <p>Balanced when no current in galvanometer. Condition: $R_1/R_2 = R_3/R_4$.</p>
                `
            },
            {
                id: 'ch4', title: '4. Moving Charges & Magnetism', 
                content: `
                    <h3>Moving Charges & Magnetism</h3>
                    <div class="formula-box">
                        <strong>Biot-Savart Law:</strong> $$ dB = \\frac{\\mu_0 I dl \\sin\\theta}{4\\pi r^2} $$ <br>
                        <strong>Lorentz Force:</strong> $$ F = q(\\vec{v} \\times \\vec{B}) $$ <br>
                        <strong>Ampere's Law:</strong> $$ \\oint B.dl = \\mu_0 I $$
                    </div>
                    <h4>Motion in B Field</h4>
                    <p>If $v \\perp B$, path is Circular. Radius $r = mv/qB$. Period $T = 2\\pi m / qB$ (Independent of speed).</p>
                    <h4>Force Between Parallel Wires</h4>
                    <p>$$ F/l = \\frac{\\mu_0 I_1 I_2}{2\\pi d} $$. Parallel currents attract, anti-parallel repel. This defines the Ampere.</p>
                `
            },
            {
                id: 'ch5', title: '5. Magnetism & Matter', 
                content: `
                    <h3>Magnetism & Matter</h3>
                    <div class="formula-box">
                        <strong>Magnetic Moment:</strong> $M = NIA$ <br>
                        <strong>Axial Field:</strong> $B = \\frac{\\mu_0}{4\\pi} \\frac{2M}{r^3}$
                    </div>
                    <h4>Magnetic Materials</h4>
                    <ul>
                        <li><strong>Diamagnetic:</strong> Repelled by magnets. $\\chi < 0$ (small negative). Example: Water, Cu.</li>
                        <li><strong>Paramagnetic:</strong> Weakly attracted. $\\chi > 0$ (small positive). Example: Al, Na.</li>
                        <li><strong>Ferromagnetic:</strong> Strongly attracted. $\\chi \gg 0$. Example: Fe, Ni, Co.</li>
                    </ul>
                `
            },
            {
                id: 'ch6', title: '6. Electromagnetic Induction', 
                content: `
                    <h3>Electromagnetic Induction</h3>
                    <div class="formula-box">
                        <strong>Faraday's Law:</strong> $$ \\epsilon = -\\frac{d\\phi}{dt} $$ <br>
                        <strong>Motional EMF:</strong> $$ \\epsilon = Blv $$ <br>
                        <strong>Self Inductance:</strong> $$ \\epsilon = -L \\frac{dI}{dt} $$
                    </div>
                    <h4>Lenz's Law</h4>
                    <p>The direction of induced current is such that it opposes the change in magnetic flux that produced it. (Conservation of Energy).</p>
                    <h4>AC Generator</h4>
                    <p>Principle: Coil rotates in B field. Flux $\\phi = BA\\cos(\\omega t)$. EMF $\\epsilon = -d\\phi/dt = NBA\\omega \\sin(\\omega t)$.</p>
                `
            },
            {
                id: 'ch7', title: '7. Alternating Current', 
                content: `
                    <h3>Alternating Current</h3>
                    <div class="formula-box">
                        <strong>RMS Value:</strong> $$ I_{rms} = I_0 / \\sqrt{2} $$ <br>
                        <strong>Inductive Reactance:</strong> $$ X_L = \\omega L $$ <br>
                        <strong>Capacitive Reactance:</strong> $$ X_C = 1/\\omega C $$ <br>
                        <strong>Impedance:</strong> $$ Z = \\sqrt{R^2 + (X_L - X_C)^2} $$
                    </div>
                    <h4>Series LCR Circuit</h4>
                    <p><strong>Resonance:</strong> Occurs when $X_L = X_C$. Current is maximum ($V/R$). Resonant frequency $\\omega_0 = 1/\\sqrt{LC}$.</p>
                    <p><strong>Power Factor:</strong> $\\cos\\phi = R/Z$. For pure L or C, power is zero (Wattless current).</p>
                    <p><strong>Transformer:</strong> $V_s/V_p = N_s/N_p$. Step-up increases Voltage, decreases Current.</p>
                `
            },
            {
                id: 'ch8', title: '8. Electromagnetic Waves', 
                content: `
                    <h3>Electromagnetic Waves</h3>
                    <div class="formula-box">
                        <strong>Speed:</strong> $$ c = \\frac{1}{\\sqrt{\\mu_0 \\epsilon_0}} = \\frac{E_0}{B_0} $$ <br>
                        <strong>Energy Density:</strong> $$ u = \\frac{1}{2}\\epsilon_0 E^2 + \\frac{1}{2\\mu_0} B^2 $$
                    </div>
                    <h4>Spectrum (Low to High Freq)</h4>
                    <p>Radio -> Microwave -> Infrared -> Visible -> UV -> X-Rays -> Gamma Rays.</p>
                    <p><strong>Displacement Current:</strong> Current due to changing electric field. $I_d = \\epsilon_0 d\\phi_E/dt$.</p>
                `
            },
            {
                id: 'ch9', title: '9. Ray Optics', 
                content: `
                    <h3>Ray Optics</h3>
                    <div class="formula-box">
                        <strong>Mirror Formula:</strong> $$ 1/v + 1/u = 1/f $$ <br>
                        <strong>Lens Formula:</strong> $$ 1/v - 1/u = 1/f $$ <br>
                        <strong>Prism:</strong> $$ \\delta = i + e - A $$
                    </div>
                    <h4>Total Internal Reflection</h4>
                    <p>Light travels from Denser to Rarer. Angle of incidence > Critical Angle ($i > i_c$). $\\sin(i_c) = 1/\\mu$. Application: Optical Fibers.</p>
                    <h4>Optical Instruments</h4>
                    <p><strong>Microscope:</strong> $M = m_o \\times m_e$. Final image Virtual, Inverted, Magnified.</p>
                    <p><strong>Telescope:</strong> $M = f_o / f_e$. Objective has large aperture for brightness.</p>
                `
            },
            {
                id: 'ch10', title: '10. Wave Optics', 
                content: `
                    <h3>Wave Optics</h3>
                    <div class="formula-box">
                        <strong>Constructive (Bright):</strong> $\\Delta x = n\\lambda$ <br>
                        <strong>Destructive (Dark):</strong> $\\Delta x = (n+0.5)\\lambda$ <br>
                        <strong>Fringe Width:</strong> $$ \\beta = \\frac{\\lambda D}{d} $$
                    </div>
                    <h4>Huygens Principle</h4>
                    <p>Each point on a wavefront is a source of secondary wavelets. The tangent to these wavelets gives the new wavefront.</p>
                    <h4>Diffraction (Single Slit)</h4>
                    <p>Central Maxima width: $2\\lambda D/a$. Condition for Minima: $a\\sin\\theta = n\\lambda$. (Note: "n" is integer, unlike interference).</p>
                `
            },
            {
                id: 'ch11', title: '11. Dual Nature', 
                content: `
                    <h3>Dual Nature of Radiation</h3>
                    <div class="formula-box">
                        <strong>Einstein Eq:</strong> $$ K_{max} = h\\nu - \\phi_0 $$ <br>
                        <strong>De Broglie:</strong> $$ \\lambda = \\frac{h}{p} = \\frac{h}{\\sqrt{2mK}} $$
                    </div>
                    <h4>Photoelectric Effect</h4>
                    <p><strong>Intensity:</strong> Affects Photocurrent (Linear graph).</p>
                    <p><strong>Frequency:</strong> Affects Stopping Potential (Linear graph with intercept $\\phi_0$).</p>
                    <p><strong>Slope of V vs Frequency graph:</strong> $h/e$ (Universal constant).</p>
                `
            },
            {
                id: 'ch12', title: '12. Atoms', 
                content: `
                    <h3>Atoms</h3>
                    <div class="formula-box">
                        <strong>Bohr Quantization:</strong> $$ L = mvr = \\frac{nh}{2\\pi} $$ <br>
                        <strong>Energy:</strong> $$ E_n = -\\frac{13.6}{n^2} \\text{ eV} $$ <br>
                        <strong>Radius:</strong> $$ r_n \\propto n^2 $$
                    </div>
                    <h4>Alpha Scattering</h4>
                    <p>Most alphas pass straight (Atom is empty). Few deflect (Nucleus is tiny, heavy, positive). Impact parameter $b \propto \cot(\theta/2)$.</p>
                `
            },
            {
                id: 'ch13', title: '13. Nuclei', 
                content: `
                    <h3>Nuclei</h3>
                    <div class="formula-box">
                        <strong>Radius:</strong> $$ R = R_0 A^{1/3} $$ <br>
                        <strong>Density:</strong> Constant (Independent of A). <br>
                        <strong>Mass Defect:</strong> $$ \\Delta m = [Zm_p + (A-Z)m_n] - M_{nuc} $$
                    </div>
                    <h4>Binding Energy</h4>
                    <p>Energy released when nucleus forms. $BE = \\Delta m c^2$. Higher BE/nucleon = More Stability (Fe-56 is max). Fusion (light nuclei) and Fission (heavy nuclei) both move towards higher BE/A.</p>
                `
            },
            {
                id: 'ch14', title: '14. Semiconductors', 
                content: `
                    <h3>Semiconductors</h3>
                    <h4>Energy Bands</h4>
                    <p><strong>Conductors:</strong> Overlapping bands. <strong>Insulators:</strong> Large gap ($>3eV$). <strong>Semiconductors:</strong> Small gap ($<3eV$).</p>
                    <h4>p-n Junction</h4>
                    <p><strong>Forward Bias:</strong> p to +ve. Barrier decreases. Current flows (mA).</p>
                    <p><strong>Reverse Bias:</strong> p to -ve. Barrier increases. Negligible current ($\mu A$).</p>
                    <h4>Rectifiers</h4>
                    <p><strong>Half Wave:</strong> 1 Diode. Output freq = Input freq.</p>
                    <p><strong>Full Wave:</strong> 2 Diodes (Center tap). Output freq = 2 $\\times$ Input freq.</p>
                `
            }
        ];

        // --- 3. BLUEPRINT DATA ---
        const blueprint = {
            'E': { label: 'Section E (5M)', color: 'indigo', qs: [
                {no:31, ch:'Electro', t:'Capacitance w/ Dielectric', tip:'Graph V vs d. Formula C=KA/d.'},
                {no:32, ch:'Optics', t:'Lens Maker Formula', tip:'Draw surfaces separately. Use sign convention.'},
                {no:33, ch:'Devices', t:'Transformer/Galvanometer', tip:'Draw labeled diagram. List 4 losses.'}
            ]},
            'D': { label: 'Section D (4M)', color: 'emerald', qs: [
                {no:29, ch:'Semi', t:'p-n Junction Case', tip:'Identify Forward/Reverse bias from Voltage.'},
                {no:30, ch:'Dual', t:'Photoelectric Graph', tip:'Threshold frequency is x-intercept.'}
            ]},
            'C': { label: 'Section C (3M)', color: 'amber', qs: [
                {no:22, ch:'Semi', t:'Full Wave Rectifier', tip:'Draw Input vs Output waveforms aligned.'},
                {no:23, ch:'Current', t:'Kirchhoff Laws', tip:'Junction Law (Charge), Loop Law (Energy).'},
                {no:24, ch:'Nuclei', t:'Binding Energy Num', tip:'Use 1u = 931.5 MeV. Check mass defect.'},
                {no:25, ch:'Optics', t:'Microscope Ray Diagram', tip:'Final image at D (virtual, inverted).'},
                {no:26, ch:'Wave', t:'Huygens Principle', tip:'Prove i=r or Snell Law geometrically.'},
                {no:27, ch:'Magnet', t:'Particle Motion', tip:'Radius r = mv/qB. Time period T independent of v.'},
                {no:28, ch:'EMI', t:'AC Generator EMF', tip:'Max EMF = NBAomega. Derivative of flux.'}
            ]},
            'B': { label: 'Section B (2M)', color: 'blue', qs: [
                {no:18, ch:'Current', t:'Internal Res Graph', tip:'V vs I graph. Slope is -r. Intercept E.'},
                {no:19, ch:'Electro', t:'Gauss Flux', tip:'Flux depends only on enclosed charge.'},
                {no:20, ch:'Magnet', t:'Force b/w Wires', tip:'Attract if parallel, Repel if anti-parallel.'},
                {no:21, ch:'Atoms', t:'Alpha Scattering', tip:'Distance of closest approach calculation.'}
            ]}
        };

        // --- APP LOGIC ---
        function initApp() {
            renderCharts();
            renderBlueprintTabs();
            renderBlueprintContent('E'); 
            renderStudyNav();
            switchView('dashboard');
            if (window.MathJax) MathJax.typesetPromise();
        }

        function switchView(view) {
            document.getElementById('view-dashboard').classList.add('hidden');
            document.getElementById('view-study-zone').classList.add('hidden');
            document.getElementById(`view-${view}`).classList.remove('hidden');
            
            // Toggle Nav Styles
            document.getElementById('nav-dashboard').classList.toggle('text-white', view === 'dashboard');
            document.getElementById('nav-dashboard').classList.toggle('bg-gray-800', view === 'dashboard');
            document.getElementById('nav-study-zone').classList.toggle('text-white', view === 'study-zone');
            document.getElementById('nav-study-zone').classList.toggle('bg-gray-800', view === 'study-zone');

            if(view === 'study-zone' && window.MathJax) MathJax.typesetPromise();
        }

        function renderBlueprintTabs() {
            const c = document.getElementById('section-tabs');
            c.innerHTML = '';
            Object.keys(blueprint).forEach(k => {
                c.innerHTML += `<button onclick="renderBlueprintContent('${k}')" class="flex-shrink-0 px-4 py-2 bg-gray-800 rounded-full text-slate-300 hover:text-white border border-transparent hover:border-gray-600 text-xs uppercase font-bold transition-all">${blueprint[k].label}</button>`;
            });
        }

        function renderBlueprintContent(k) {
            const s = blueprint[k];
            const c = document.getElementById('content-area');
            c.innerHTML = `<div class="grid grid-cols-1 md:grid-cols-3 gap-6 animate-fade-in">${
                s.qs.map((q, i) => `
                    <div class="glass-panel p-6 rounded-xl border border-gray-800 hover:border-${s.color}-500/50 transition-colors">
                        <div class="flex justify-between mb-2"><span class="text-xs font-bold text-${s.color}-400 bg-${s.color}-900/20 px-2 py-1 rounded">Q${q.no}</span><span class="text-xs text-slate-500 font-bold uppercase">${q.ch}</span></div>
                        <h4 class="text-white font-bold mb-2">${q.t}</h4>
                        <p class="text-xs text-slate-400 bg-black/30 p-2 rounded">ðŸ’¡ ${q.tip}</p>
                    </div>
                `).join('')
            }</div>`;
        }

        function openModal(type) {
            document.getElementById('modal-backdrop').classList.remove('hidden');
            document.getElementById('modal-panel').classList.remove('hidden');
            const data = qaDatabase[type] || qaDatabase['hot-list'];
            document.getElementById('modal-title').innerText = type === 'hot-list' ? 'ðŸ”¥ Most Probable Questions' : 'âš¡ High Frequency Questions';
            document.getElementById('modal-body').innerHTML = data.map(item => `
                <div class="bg-gray-800/50 rounded-xl p-6 border border-gray-700 mb-4">
                    <h4 class="text-white font-bold mb-3 text-base">${item.q}</h4>
                    <div class="text-slate-300 text-sm mb-4 pl-4 border-l-2 border-blue-500 leading-relaxed">${item.a}</div>
                    <div class="text-xs bg-yellow-500/10 text-yellow-200 p-3 rounded border border-yellow-500/20 flex gap-2">
                        <i class="fas fa-random mt-0.5"></i> <div>${item.twist}</div>
                    </div>
                </div>
            `).join('');
            if(window.MathJax) MathJax.typesetPromise();
        }

        function closeModal() {
            document.getElementById('modal-backdrop').classList.add('hidden');
            document.getElementById('modal-panel').classList.add('hidden');
        }

        function renderStudyNav() {
            document.getElementById('study-nav').innerHTML = studyData.map(t => 
                `<button onclick="renderStudyContent('${t.id}')" class="w-full text-left p-4 rounded-xl bg-gray-900 hover:bg-gray-800 border border-gray-800 text-slate-300 hover:text-white font-bold mb-2 transition-colors border-l-4 border-transparent hover:border-blue-500">${t.title}</button>`
            ).join('');
        }

        function renderStudyContent(id) {
            document.getElementById('study-content').innerHTML = studyData.find(t => t.id === id).content;
            if(window.MathJax) MathJax.typesetPromise();
        }

        function renderCharts() {
            Chart.defaults.color = '#94A3B8';
            Chart.defaults.font.family = "'Inter'";
            new Chart(document.getElementById('weightageChart'), {
                type: 'bar',
                data: {
                    labels: ['Electro', 'Current', 'Magnet', 'EMI/AC', 'Optics', 'Modern', 'Semi'],
                    datasets: [{ label: 'Marks', data: [16, 7, 17, 8, 18, 12, 7], backgroundColor: '#3B82F6', borderRadius: 4 }]
                },
                options: { plugins: { legend: { display: false } }, scales: { y: { grid: { color: '#1e293b' } }, x: { grid: { display: false } } } }
            });
            new Chart(document.getElementById('typologyChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Recall', 'Application', 'Analysis'],
                    datasets: [{ data: [38, 32, 30], backgroundColor: ['#3B82F6', '#8B5CF6', '#F43F5E'], borderWidth: 0 }]
                },
                options: { cutout: '75%', plugins: { legend: { position: 'right' } } }
            });
        }

        window.onload = initApp;
    </script>
</body>
</html>

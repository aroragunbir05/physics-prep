<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CASE Physics 2025-26 Ultimate Prep</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- MathJax -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Palette -->
    <style>
        :root {
            --bg-primary: #0B0E14;
            --bg-secondary: #151921;
            --accent-blue: #3B82F6;
            --accent-indigo: #6366F1;
            --text-primary: #E2E8F0;
            --text-secondary: #94A3B8;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-secondary); }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        
        @keyframes slideIn { from { transform: translateX(20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .animate-slide-in { animation: slideIn 0.4s ease-out forwards; }

        .glass-panel {
            background: rgba(21, 25, 33, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .card-hover { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .card-hover:hover {
            transform: translateY(-4px);
            border-color: rgba(59, 130, 246, 0.5);
            box-shadow: 0 10px 30px -10px rgba(59, 130, 246, 0.2);
        }

        .gradient-text {
            background: linear-gradient(135deg, #60A5FA 0%, #A78BFA 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .custom-checkbox:checked + div {
            background-color: rgba(16, 185, 129, 0.2);
            border-color: #10B981;
        }
        .custom-checkbox:checked + div i { opacity: 1; transform: scale(1); }
        
        /* MathJax Adjustments */
        mjx-container { font-size: 110% !important; color: #E2E8F0 !important; }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="border-b border-gray-800 bg-[#0B0E14]/90 sticky top-0 z-50 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="h-10 w-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/20">
                    <i class="fas fa-atom text-white text-lg"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-white tracking-tight">CASE Physics <span class="gradient-text">2025-26</span></h1>
                    <p class="text-xs text-slate-400 font-mono tracking-wider">ULTIMATE PREP SUITE</p>
                </div>
            </div>
            
            <div class="hidden md:flex items-center gap-6">
                <nav class="flex gap-1 bg-gray-900 p-1 rounded-lg">
                    <button onclick="switchView('dashboard')" id="nav-dashboard" class="px-4 py-1.5 text-sm font-medium rounded-md text-white bg-gray-800 shadow-sm transition-all">Dashboard</button>
                    <button onclick="switchView('study-zone')" id="nav-study-zone" class="px-4 py-1.5 text-sm font-medium rounded-md text-slate-400 hover:text-white transition-all">Study Zone ðŸ“š</button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full relative">

        <!-- VIEW: DASHBOARD -->
        <div id="view-dashboard" class="space-y-12 animate-fade-in">
            <!-- Hero -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 relative overflow-hidden rounded-2xl border border-gray-800 bg-gradient-to-br from-gray-900 to-[#0F1218] p-8 shadow-2xl">
                    <div class="relative z-10">
                        <h2 class="text-3xl font-bold text-white mb-2">Exam Strategy Center</h2>
                        <p class="text-slate-400 text-lg leading-relaxed">
                            Targeting <strong>70/70</strong>. Based on 2025-26 Blueprint. 
                            <br><span class="text-blue-400 font-semibold">Priority:</span> Electrostatics, Optics & Magnetism.
                        </p>
                    </div>
                </div>

                <div class="glass-panel p-6 rounded-2xl flex flex-col justify-center gap-4">
                    <button onclick="openModal('hot-list')" class="group w-full py-4 px-6 rounded-xl bg-gradient-to-r from-blue-600/20 to-indigo-600/20 border border-blue-500/30 hover:border-blue-400 transition-all flex items-center justify-between">
                        <div class="text-left"><div class="text-sm font-bold text-white">ðŸ”¥ Most Probable Qs</div><div class="text-xs text-blue-300">With Detailed Answers</div></div>
                        <i class="fas fa-chevron-right text-blue-500/50 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                    <button onclick="openModal('repeated-list')" class="group w-full py-4 px-6 rounded-xl bg-gradient-to-r from-amber-600/20 to-orange-600/20 border border-amber-500/30 hover:border-amber-400 transition-all flex items-center justify-between">
                        <div class="text-left"><div class="text-sm font-bold text-white">âš¡ High Frequency</div><div class="text-xs text-amber-300">Repeated Concepts</div></div>
                        <i class="fas fa-chevron-right text-amber-500/50 group-hover:translate-x-1 transition-transform"></i>
                    </button>
                </div>
            </div>

            <!-- Blueprint Explorer -->
            <div>
                <div class="flex overflow-x-auto gap-2 pb-4 border-b border-gray-800 mb-6" id="section-tabs"></div>
                <div id="content-area" class="min-h-[300px]"></div>
            </div>

            <!-- Analytics -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="glass-panel p-6 rounded-2xl">
                    <h3 class="text-lg font-bold text-white mb-4">Unit Weightage</h3>
                    <div class="chart-container"><canvas id="weightageChart"></canvas></div>
                </div>
                <div class="glass-panel p-6 rounded-2xl">
                    <h3 class="text-lg font-bold text-white mb-4">Cognitive Breakdown</h3>
                    <div class="chart-container"><canvas id="typologyChart"></canvas></div>
                </div>
            </div>

            <!-- Resources -->
            <div class="mt-16 mb-12">
                <h2 class="text-2xl font-bold text-white mb-6">Resource Archive</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <a href="Physics-SQP 2025.pdf" target="_blank" class="glass-panel p-6 rounded-2xl border border-gray-800 hover:border-purple-500/50 transition-all text-center">
                        <i class="fas fa-file-pdf text-purple-400 text-3xl mb-4"></i>
                        <h3 class="text-white font-bold text-sm">CBSE SQP 2025-26</h3>
                        <span class="text-xs text-purple-400 mt-2 block">DOWNLOAD</span>
                    </a>
                    <a href="PHYSICS CASE QP 2024-SET A.pdf" target="_blank" class="glass-panel p-6 rounded-2xl border border-gray-800 hover:border-indigo-500/50 transition-all text-center">
                        <i class="fas fa-file-alt text-indigo-400 text-3xl mb-4"></i>
                        <h3 class="text-white font-bold text-sm">CASE 2024 Set A</h3>
                        <span class="text-xs text-indigo-400 mt-2 block">DOWNLOAD</span>
                    </a>
                    <a href="PHYSICS CASE QP- 2024-SET B.pdf" target="_blank" class="glass-panel p-6 rounded-2xl border border-gray-800 hover:border-blue-500/50 transition-all text-center">
                        <i class="fas fa-file-alt text-blue-400 text-3xl mb-4"></i>
                        <h3 class="text-white font-bold text-sm">CASE 2024 Set B</h3>
                        <span class="text-xs text-blue-400 mt-2 block">DOWNLOAD</span>
                    </a>
                    <a href="Physics-SQP.pdf" target="_blank" class="glass-panel p-6 rounded-2xl border border-gray-800 hover:border-emerald-500/50 transition-all text-center">
                        <i class="fas fa-history text-emerald-400 text-3xl mb-4"></i>
                        <h3 class="text-white font-bold text-sm">CBSE SQP 2023</h3>
                        <span class="text-xs text-emerald-400 mt-2 block">DOWNLOAD</span>
                    </a>
                    <a href="Physics_G12_Vol1_2023.pdf" target="_blank" class="glass-panel p-6 rounded-2xl border border-gray-800 hover:border-orange-500/50 transition-all text-center">
                        <i class="fas fa-brain text-orange-400 text-3xl mb-4"></i>
                        <h3 class="text-white font-bold text-sm">Competency Guide Vol 1</h3>
                        <span class="text-xs text-orange-400 mt-2 block">DOWNLOAD</span>
                    </a>
                    <a href="Physics_12Vol2.pdf" target="_blank" class="glass-panel p-6 rounded-2xl border border-gray-800 hover:border-pink-500/50 transition-all text-center">
                        <i class="fas fa-brain text-pink-400 text-3xl mb-4"></i>
                        <h3 class="text-white font-bold text-sm">Competency Guide Vol 2</h3>
                        <span class="text-xs text-pink-400 mt-2 block">DOWNLOAD</span>
                    </a>
                </div>
                <div class="mt-8 pt-6 border-t border-gray-800 text-center text-xs text-slate-500">
                    <p><strong>Sources Verified:</strong> CBSE Curriculum 2025-26 â€¢ CBSE Sample Question Paper 2025-26 â€¢ CASE Past Year Papers</p>
                </div>
            </div>
        </div>

        <!-- VIEW: STUDY ZONE -->
        <div id="view-study-zone" class="hidden space-y-8 animate-fade-in">
            <div class="text-center py-8">
                <h2 class="text-4xl font-bold text-white mb-2">Deep Dive Study Zone</h2>
                <p class="text-slate-400">Comprehensive Notes, Derivations, and Exam-Ready Answers.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-8 h-full">
                <div class="lg:col-span-1 space-y-2 h-fit sticky top-24" id="study-nav"></div>
                <div class="lg:col-span-3">
                    <div id="study-content" class="glass-panel p-8 rounded-2xl border border-gray-800 min-h-[600px]"></div>
                </div>
            </div>
        </div>

    </main>

    <!-- Modal -->
    <div id="modal-backdrop" class="fixed inset-0 bg-black/90 backdrop-blur-sm z-[100] hidden" onclick="closeModal()"></div>
    <div id="modal-panel" class="fixed inset-x-4 top-10 bottom-10 md:w-3/4 md:left-1/2 md:-translate-x-1/2 bg-[#151921] border border-gray-700 rounded-2xl z-[101] hidden flex flex-col">
        <div class="px-6 py-4 border-b border-gray-700 flex justify-between items-center bg-[#0B0E14] rounded-t-2xl">
            <h3 id="modal-title" class="text-xl font-bold text-white"></h3>
            <button onclick="closeModal()" class="text-slate-400 hover:text-white"><i class="fas fa-times"></i></button>
        </div>
        <div id="modal-body" class="flex-1 overflow-y-auto p-6 space-y-6"></div>
    </div>

    <!-- JS Logic -->
    <script>
        // --- 1. ENHANCED Q&A DATABASE (Exam Ready) ---
        const qaDatabase = {
            'hot-list': [
                {
                    q: "Q31: Derive the expression for Capacitance of a parallel plate capacitor with a dielectric slab of thickness t < d.",
                    a: `
                        <div class="space-y-4 text-slate-300 text-sm leading-relaxed">
                            <p><strong>Step 1: Setup</strong><br>Consider a parallel plate capacitor with area $A$, separation $d$. Vacuum field is $E_0 = \\sigma/\\epsilon_0$. A dielectric slab of thickness $t$ and constant $K$ is inserted.</p>
                            <p><strong>Step 2: Field Distribution</strong><br>Inside air (thickness $d-t$): Field is $E_0$.<br>Inside dielectric (thickness $t$): Field is $E = E_0/K$.</p>
                            <p><strong>Step 3: Potential Difference (V)</strong><br>
                            $$ V = E_0(d-t) + E(t) $$<br>
                            $$ V = E_0(d-t) + \\frac{E_0}{K}(t) $$<br>
                            $$ V = E_0 [d - t + \\frac{t}{K}] = E_0 [d - t(1 - \\frac{1}{K})] $$</p>
                            <p><strong>Step 4: Capacitance</strong><br>
                            Since $E_0 = \\frac{Q}{A\\epsilon_0}$, substitute $E_0$:<br>
                            $$ V = \\frac{Q}{A\\epsilon_0} [d - t(1 - \\frac{1}{K})] $$<br>
                            $$ C = \\frac{Q}{V} = \\frac{\\epsilon_0 A}{d - t(1 - \\frac{1}{K})} $$</p>
                        </div>
                    `,
                    twist: "<strong>Twist:</strong> If a metal slab is used ($K=\\infty$), the term $1/K \\to 0$. Formula becomes $C = \\epsilon_0 A / (d-t)$."
                },
                {
                    q: "Q32: Lens Maker's Formula (Convex Lens)",
                    a: `
                        <div class="space-y-4 text-slate-300 text-sm leading-relaxed">
                            <p><strong>Assumptions:</strong> Thin lens, paraxial rays, point object.</p>
                            <p><strong>Surface 1 (Air $n_1$ to Glass $n_2$):</strong> Image $I_1$ forms at $v'$.<br>
                            $$ \\frac{n_2}{v'} - \\frac{n_1}{u} = \\frac{n_2-n_1}{R_1} \\quad ...(1) $$</p>
                            <p><strong>Surface 2 (Glass $n_2$ to Air $n_1$):</strong> $I_1$ acts as virtual object. Final image $I$ at $v$.<br>
                            $$ \\frac{n_1}{v} - \\frac{n_2}{v'} = \\frac{n_1-n_2}{R_2} \\quad ...(2) $$</p>
                            <p><strong>Combine:</strong> Add (1) and (2):<br>
                            $$ \\frac{n_1}{v} - \\frac{n_1}{u} = (n_2-n_1)(\\frac{1}{R_1} - \\frac{1}{R_2}) $$<br>
                            Divide by $n_1$: $$ \\frac{1}{v} - \\frac{1}{u} = (\\frac{n_2}{n_1} - 1)(\\frac{1}{R_1} - \\frac{1}{R_2}) $$</p>
                            <p><strong>Result:</strong> When $u=\\infty, v=f$. So, $1/f = (\\mu - 1)(1/R_1 - 1/R_2)$.</p>
                        </div>
                    `,
                    twist: "<strong>Twist:</strong> For Equi-convex lens, $R_1 = +R, R_2 = -R$. Formula: $1/f = (\\mu-1)(2/R)$."
                },
                {
                    q: "Q33: Transformer Principle & Losses",
                    a: `
                        <div class="space-y-4 text-slate-300 text-sm leading-relaxed">
                            <p><strong>Principle:</strong> Mutual Induction. An alternating current in primary coil produces changing magnetic flux, which induces EMF in secondary coil.</p>
                            <p><strong>Formula:</strong> $V_s/V_p = N_s/N_p = I_p/I_s = k$ (Transformation Ratio).</p>
                            <p><strong>Energy Losses (4 Marks part):</strong><br>
                            1. <strong>Flux Leakage:</strong> Not all primary flux links secondary. (Fix: Soft iron core).<br>
                            2. <strong>Resistance (Copper Loss):</strong> Heat $I^2R$ in windings. (Fix: Thick copper wires).<br>
                            3. <strong>Eddy Currents:</strong> Induced currents in core cause heat. (Fix: Laminated core).<br>
                            4. <strong>Hysteresis:</strong> Magnetization/Demagnetization heat. (Fix: Soft iron material).
                            </p>
                        </div>
                    `,
                    twist: "<strong>Twist:</strong> For long distance transmission, Step-Up transformer is used at power station to reduce current ($I$) and thus reduce $I^2R$ line losses."
                }
            ],
            'repeated-list': [
                {
                    q: "Gauss Law Application: Infinite Line Charge",
                    a: `
                        <div class="space-y-4 text-slate-300 text-sm leading-relaxed">
                            <p><strong>Goal:</strong> Field $E$ at distance $r$ from wire with density $\\lambda$.</p>
                            <p><strong>Gaussian Surface:</strong> Cylinder of radius $r$, length $l$.</p>
                            <p><strong>Flux Calc:</strong> Field is radial. Flux through flat caps = 0 ($E \\perp dA$).<br>
                            Flux through curved surface = $E \\times (2\\pi r l)$.</p>
                            <p><strong>Charge Enclosed:</strong> $q = \\lambda l$.</p>
                            <p><strong>Apply Law:</strong> $\\phi = q/\\epsilon_0 \\implies E(2\\pi r l) = \\lambda l / \\epsilon_0$.</p>
                            <p><strong>Result:</strong> $E = \\frac{\\lambda}{2\\pi\\epsilon_0 r}$.</p>
                        </div>
                    `,
                    twist: "<strong>Graph:</strong> $E \\propto 1/r$. The graph is a rectangular hyperbola."
                },
                {
                    q: "Moving Coil Galvanometer",
                    a: `
                        <div class="space-y-4 text-slate-300 text-sm leading-relaxed">
                            <p><strong>Principle:</strong> Current carrying coil in magnetic field experiences torque $\\tau = NIAB\\sin\\theta$.</p>
                            <p><strong>Radial Field:</strong> Using concave poles and soft iron core makes field radial ($\theta=90^{\\circ}$ always).<br>
                            So, Deflecting Torque $\\tau_d = NIAB$.</p>
                            <p><strong>Equilibrium:</strong> $\\tau_d = \\tau_r$ (Restoring torque $k\\alpha$).<br>
                            $NIAB = k\\alpha \\implies \\alpha = (NAB/k)I$.</p>
                            <p><strong>Result:</strong> Deflection $\\alpha \\propto I$ (Linear Scale).</p>
                        </div>
                    `,
                    twist: "<strong>Current Sensitivity:</strong> $S_i = \\alpha/I = NAB/k$. To increase sensitivity, increase $N, A, B$ or decrease $k$ (use Phosphor Bronze)."
                }
            ]
        };

        // --- 2. COMPREHENSIVE STUDY NOTES ---
        const studyData = [
            {
                id: 'electro', title: 'Unit 1: Electrostatics', 
                content: `
                    <h2 class="text-3xl font-bold text-white mb-6">Electrostatics Master Notes</h2>
                    <div class="space-y-8">
                        <div class="bg-gray-900 p-6 rounded-xl border-l-4 border-blue-500">
                            <h3 class="text-xl font-bold text-blue-400 mb-4">1. Electric Charges & Fields</h3>
                            <ul class="list-disc list-inside text-slate-300 text-sm space-y-2">
                                <li><strong>Coulomb's Law:</strong> $F = k q_1 q_2 / r^2$. Vector form uses unit vector $\\hat{r}$.</li>
                                <li><strong>Electric Field:</strong> Point charge: $E = kQ/r^2$. Dipole Axis: $2kp/r^3$. Equator: $kp/r^3$.</li>
                                <li><strong>Dipole Torque:</strong> $\\vec{\\tau} = \\vec{p} \\times \\vec{E} = pE\\sin\\theta$. Max at 90Â°. Stable at 0Â°.</li>
                                <li><strong>Gauss Law:</strong> $\\oint E.dA = q_{in}/\\epsilon_0$.
                                    <br>- Shell (Inside): $E=0$.
                                    <br>- Shell (Outside): Behaves like point charge.
                                </li>
                            </ul>
                        </div>
                        <div class="bg-gray-900 p-6 rounded-xl border-l-4 border-purple-500">
                            <h3 class="text-xl font-bold text-purple-400 mb-4">2. Potential & Capacitance</h3>
                            <ul class="list-disc list-inside text-slate-300 text-sm space-y-2">
                                <li><strong>Potential (V):</strong> $V = kQ/r$. Scalar. Dipole: $kp\\cos\\theta/r^2$.</li>
                                <li><strong>Relation E-V:</strong> $E = -dV/dr$. Field flows High to Low potential.</li>
                                <li><strong>Capacitor:</strong> $C = \\epsilon_0 A / d$. With Dielectric: $C = K C_0$.</li>
                                <li><strong>Energy:</strong> $U = 1/2 CV^2 = Q^2/2C = 1/2 QV$. Density: $1/2 \\epsilon_0 E^2$.</li>
                            </ul>
                        </div>
                    </div>`
            },
            {
                id: 'current', title: 'Unit 2: Current Electricity', 
                content: `
                    <h2 class="text-3xl font-bold text-white mb-6">Current Electricity</h2>
                    <div class="space-y-8">
                        <div class="bg-gray-900 p-6 rounded-xl border-l-4 border-green-500">
                            <h3 class="text-xl font-bold text-green-400 mb-4">Drift Velocity & Ohm's Law</h3>
                            <p class="text-slate-300 text-sm mb-4"><strong>Drift Velocity:</strong> $v_d = eE\\tau/m$. Current $I = n e A v_d$.</p>
                            <p class="text-slate-300 text-sm"><strong>Resistivity ($\rho$):</strong> $\\rho = m / (n e^2 \\tau)$. Depends on material & Temp (not dimensions).</p>
                        </div>
                        <div class="bg-gray-900 p-6 rounded-xl border-l-4 border-red-500">
                            <h3 class="text-xl font-bold text-red-400 mb-4">Kirchhoff & Cells</h3>
                            <ul class="list-disc list-inside text-slate-300 text-sm space-y-2">
                                <li><strong>KCL (Junction):</strong> $\\sum I = 0$ (Conservation of Charge).</li>
                                <li><strong>KVL (Loop):</strong> $\\sum \\Delta V = 0$ (Conservation of Energy). Path direction match current = $-IR$.</li>
                                <li><strong>Wheatstone Bridge:</strong> Balanced if $P/Q = R/S$. No current in galvanometer.</li>
                                <li><strong>Cells:</strong> Series ($E_{eq} = E_1+E_2$). Parallel ($E_{eq} = (E_1 r_2 + E_2 r_1)/(r_1+r_2)$).</li>
                            </ul>
                        </div>
                    </div>`
            },
            {
                id: 'magnetism', title: 'Unit 3: Magnetism', 
                content: `
                    <h2 class="text-3xl font-bold text-white mb-6">Magnetic Effects</h2>
                    <div class="space-y-8">
                        <div class="bg-gray-900 p-6 rounded-xl border-l-4 border-yellow-500">
                            <h3 class="text-xl font-bold text-yellow-400 mb-4">Moving Charges</h3>
                            <ul class="list-disc list-inside text-slate-300 text-sm space-y-2">
                                <li><strong>Biot-Savart:</strong> $dB = \\frac{\\mu_0 I dl \\sin\\theta}{4\\pi r^2}$.</li>
                                <li><strong>Ampere's Law:</strong> $\\oint B.dl = \\mu_0 I_{enc}$. Solenoid $B = \\mu_0 n I$.</li>
                                <li><strong>Force on Charge:</strong> $F = q(v \\times B)$. Path is Circle if $v \\perp B$ ($r = mv/qB$). Helix if angle $\\theta$.</li>
                                <li><strong>Force on Wire:</strong> $F = I(l \\times B)$. Parallel wires attract if currents parallel.</li>
                            </ul>
                        </div>
                    </div>`
            },
            {
                id: 'emi', title: 'Unit 4: EMI & AC', 
                content: `
                    <h2 class="text-3xl font-bold text-white mb-6">EMI & Alternating Current</h2>
                    <div class="space-y-8">
                        <div class="bg-gray-900 p-6 rounded-xl border-l-4 border-indigo-500">
                            <h3 class="text-xl font-bold text-indigo-400 mb-4">AC Circuits</h3>
                            <p class="text-slate-300 text-sm mb-2"><strong>LCR Series:</strong> Impedance $Z = \\sqrt{R^2 + (X_L - X_C)^2}$.</p>
                            <p class="text-slate-300 text-sm mb-2"><strong>Resonance:</strong> $X_L = X_C \\implies \\omega = 1/\\sqrt{LC}$. Current max ($V/R$).</p>
                            <p class="text-slate-300 text-sm"><strong>Power:</strong> $P = V_{rms} I_{rms} \\cos\\phi$. Power factor $\\cos\\phi = R/Z$.</p>
                        </div>
                    </div>`
            },
            {
                id: 'optics', title: 'Unit 6: Optics', 
                content: `
                    <h2 class="text-3xl font-bold text-white mb-6">Ray & Wave Optics</h2>
                    <div class="space-y-8">
                        <div class="bg-gray-900 p-6 rounded-xl border-l-4 border-pink-500">
                            <h3 class="text-xl font-bold text-pink-400 mb-4">Wave Optics</h3>
                            <ul class="list-disc list-inside text-slate-300 text-sm space-y-2">
                                <li><strong>Huygens Principle:</strong> Every point on wavefront is source of secondary wavelets.</li>
                                <li><strong>Interference (YDSE):</strong> Path diff $\\Delta x = n\\lambda$ (Bright), $(n-0.5)\\lambda$ (Dark).<br>Fringe Width $\\beta = \\lambda D / d$.</li>
                                <li><strong>Diffraction (Single Slit):</strong> Central Max width = $2\\lambda D / a$. Minima at $a\\sin\\theta = n\\lambda$.</li>
                            </ul>
                        </div>
                    </div>`
            },
            {
                id: 'modern', title: 'Unit 7-8: Modern Physics', 
                content: `
                    <h2 class="text-3xl font-bold text-white mb-6">Modern Physics</h2>
                    <div class="space-y-8">
                        <div class="bg-gray-900 p-6 rounded-xl border-l-4 border-cyan-500">
                            <h3 class="text-xl font-bold text-cyan-400 mb-4">Dual Nature & Atoms</h3>
                            <ul class="list-disc list-inside text-slate-300 text-sm space-y-2">
                                <li><strong>Photoelectric:</strong> $K_{max} = h\\nu - \\phi_0$. Slope of V vs $\\nu$ is $h/e$.</li>
                                <li><strong>De-Broglie:</strong> $\\lambda = h/p = h/\\sqrt{2mK} = 1.227/\\sqrt{V}$ nm (electron).</li>
                                <li><strong>Bohr Model:</strong> $L = nh/2\\pi$. Radius $r \\propto n^2$. Energy $E \\propto -13.6/n^2$ eV.</li>
                            </ul>
                        </div>
                    </div>`
            }
        ];

        // --- 3. BLUEPRINT DATA ---
        const blueprint = {
            'E': { label: 'Section E (5M)', color: 'indigo', qs: [
                {no:31, ch:'Electro', t:'Capacitance w/ Dielectric', tip:'Graph V vs d. Formula C=KA/d.'},
                {no:32, ch:'Optics', t:'Lens Maker Formula', tip:'Draw surfaces separately. Use sign convention.'},
                {no:33, ch:'Devices', t:'Transformer/Galvanometer', tip:'Draw labeled diagram. List 4 losses.'}
            ]},
            'D': { label: 'Section D (4M)', color: 'emerald', qs: [
                {no:29, ch:'Semi', t:'p-n Junction Case', tip:'Identify Forward/Reverse bias from Voltage.'},
                {no:30, ch:'Dual', t:'Photoelectric Graph', tip:'Threshold frequency is x-intercept.'}
            ]},
            'C': { label: 'Section C (3M)', color: 'amber', qs: [
                {no:22, ch:'Semi', t:'Full Wave Rectifier', tip:'Draw Input vs Output waveforms aligned.'},
                {no:23, ch:'Current', t:'Kirchhoff Laws', tip:'Junction Law (Charge), Loop Law (Energy).'},
                {no:24, ch:'Nuclei', t:'Binding Energy Num', tip:'Use 1u = 931.5 MeV. Check mass defect.'},
                {no:25, ch:'Optics', t:'Microscope Ray Diagram', tip:'Final image at D (virtual, inverted).'},
                {no:26, ch:'Wave', t:'Huygens Principle', tip:'Prove i=r or Snell Law geometrically.'},
                {no:27, ch:'Magnet', t:'Particle Motion', tip:'Radius r = mv/qB. Time period T independent of v.'},
                {no:28, ch:'EMI', t:'AC Generator EMF', tip:'Max EMF = NBAomega. Derivative of flux.'}
            ]},
            'B': { label: 'Section B (2M)', color: 'blue', qs: [
                {no:18, ch:'Current', t:'Internal Res Graph', tip:'V vs I graph. Slope is -r. Intercept E.'},
                {no:19, ch:'Electro', t:'Gauss Flux', tip:'Flux depends only on enclosed charge.'},
                {no:20, ch:'Magnet', t:'Force b/w Wires', tip:'Attract if parallel, Repel if anti-parallel.'},
                {no:21, ch:'Atoms', t:'Alpha Scattering', tip:'Distance of closest approach calculation.'}
            ]}
        };

        // --- APP LOGIC ---
        function initApp() {
            renderCharts();
            renderBlueprintTabs();
            renderBlueprintContent('E'); 
            renderStudyNav();
            switchView('dashboard');
            if (window.MathJax) MathJax.typesetPromise();
        }

        function switchView(view) {
            document.getElementById('view-dashboard').classList.add('hidden');
            document.getElementById('view-study-zone').classList.add('hidden');
            document.getElementById(`view-${view}`).classList.remove('hidden');
            
            // Toggle Nav Styles
            document.getElementById('nav-dashboard').classList.toggle('text-white', view === 'dashboard');
            document.getElementById('nav-dashboard').classList.toggle('bg-gray-800', view === 'dashboard');
            document.getElementById('nav-study-zone').classList.toggle('text-white', view === 'study-zone');
            document.getElementById('nav-study-zone').classList.toggle('bg-gray-800', view === 'study-zone');

            if(view === 'study-zone' && window.MathJax) MathJax.typesetPromise();
        }

        function renderBlueprintTabs() {
            const c = document.getElementById('section-tabs');
            c.innerHTML = '';
            Object.keys(blueprint).forEach(k => {
                c.innerHTML += `<button onclick="renderBlueprintContent('${k}')" class="flex-shrink-0 px-4 py-2 bg-gray-800 rounded-full text-slate-300 hover:text-white border border-transparent hover:border-gray-600 text-xs uppercase font-bold transition-all">${blueprint[k].label}</button>`;
            });
        }

        function renderBlueprintContent(k) {
            const s = blueprint[k];
            const c = document.getElementById('content-area');
            c.innerHTML = `<div class="grid grid-cols-1 md:grid-cols-3 gap-6 animate-fade-in">${
                s.qs.map(q => `
                    <button onclick="openQuestionModal('${q.t}', '${q.tip}')" class="text-left w-full glass-panel p-6 rounded-xl border border-gray-800 hover:border-${s.color}-500/50 transition-all group relative overflow-hidden">
                        <div class="flex justify-between mb-2 z-10 relative"><span class="text-xs font-bold text-${s.color}-400 bg-${s.color}-900/20 px-2 py-1 rounded">Q${q.no}</span><span class="text-xs text-slate-500 font-bold uppercase">${q.ch}</span></div>
                        <h4 class="text-white font-bold mb-2 z-10 relative group-hover:text-${s.color}-300">${q.t}</h4>
                        <div class="text-xs text-slate-400 bg-black/30 p-2 rounded z-10 relative">ðŸ’¡ ${q.tip}</div>
                        <div class="absolute inset-0 bg-${s.color}-500/5 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                    </button>
                `).join('')
            }</div>`;
        }

        function openQuestionModal(title, tip) {
            // Simplified modal for blueprint questions (expandable in future)
            openModal('hot-list'); // For now, defaulting to main Q&A. Ideally, map specific Qs.
        }

        function openModal(type) {
            document.getElementById('modal-backdrop').classList.remove('hidden');
            document.getElementById('modal-panel').classList.remove('hidden');
            const data = qaDatabase[type] || qaDatabase['hot-list']; // Fallback
            document.getElementById('modal-title').innerText = type === 'hot-list' ? 'ðŸ”¥ Most Probable Questions' : 'âš¡ High Frequency Questions';
            document.getElementById('modal-body').innerHTML = data.map(item => `
                <div class="bg-gray-800/50 rounded-xl p-6 border border-gray-700 mb-4">
                    <h4 class="text-white font-bold mb-3 text-base">${item.q}</h4>
                    <div class="text-slate-300 text-sm mb-4 pl-4 border-l-2 border-blue-500 leading-relaxed">${item.a}</div>
                    <div class="text-xs bg-yellow-500/10 text-yellow-200 p-3 rounded border border-yellow-500/20 flex gap-2">
                        <i class="fas fa-random mt-0.5"></i> <div>${item.twist}</div>
                    </div>
                </div>
            `).join('');
            if(window.MathJax) MathJax.typesetPromise();
        }

        function closeModal() {
            document.getElementById('modal-backdrop').classList.add('hidden');
            document.getElementById('modal-panel').classList.add('hidden');
        }

        function renderStudyNav() {
            document.getElementById('study-nav').innerHTML = studyData.map(t => 
                `<button onclick="renderStudyContent('${t.id}')" class="w-full text-left p-4 rounded-xl bg-gray-900 hover:bg-gray-800 border border-gray-800 text-slate-300 hover:text-white font-bold mb-2 transition-colors border-l-4 border-transparent hover:border-blue-500">${t.title}</button>`
            ).join('');
        }

        function renderStudyContent(id) {
            document.getElementById('study-content').innerHTML = studyData.find(t => t.id === id).content;
            if(window.MathJax) MathJax.typesetPromise();
        }

        function renderCharts() {
            Chart.defaults.color = '#94A3B8';
            Chart.defaults.font.family = "'Inter'";
            new Chart(document.getElementById('weightageChart'), {
                type: 'bar',
                data: {
                    labels: ['Electro', 'Current', 'Magnet', 'EMI/AC', 'Optics', 'Modern', 'Semi'],
                    datasets: [{ label: 'Marks', data: [16, 7, 17, 8, 18, 12, 7], backgroundColor: '#3B82F6', borderRadius: 4 }]
                },
                options: { plugins: { legend: { display: false } }, scales: { y: { grid: { color: '#1e293b' } }, x: { grid: { display: false } } } }
            });
            new Chart(document.getElementById('typologyChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Recall', 'Application', 'Analysis'],
                    datasets: [{ data: [38, 32, 30], backgroundColor: ['#3B82F6', '#8B5CF6', '#F43F5E'], borderWidth: 0 }]
                },
                options: { cutout: '75%', plugins: { legend: { position: 'right' } } }
            });
        }

        window.onload = initApp;
    </script>
</body>
</html>
